(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{189:function(e,t,a){e.exports=a(486)},194:function(e,t,a){},233:function(e,t,a){},237:function(e,t,a){},249:function(e,t,a){},250:function(e,t,a){},251:function(e,t,a){},252:function(e,t,a){},281:function(e,t,a){},282:function(e,t,a){},283:function(e,t,a){},486:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(96),o=a.n(c),i=(a(194),a(67)),l=a(68),s=a(70),u=a(69),m=a(71),p=a(23),d=a(78),v=a(47),E=a(188),f=a(142),h=a(182),g=a(46),b=a(99),_=a(80),y=a.n(_),O="_SUCCESS",S="_START",w="_FAIL",j={loading:!1,loaded:!1,error:null},N=(y.a.bool,y.a.bool,y.a.string,a(134)),P=a.n(N),A=a(183),M=a(184),k=a.n(M);function C(e){return I.apply(this,arguments)}function I(){return(I=Object(A.a)(P.a.mark(function e(t){var a,r,n,c,o,i;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object({NODE_ENV:"production",PUBLIC_URL:"/the-Movies-api",REACT_APP_BASE_URL:"https://api.themoviedb.org/3",REACT_APP_POPULAR_MOVIES:"/discover/movie?sort_by=popularity.desc",REACT_APP_SEARCH_MOVIE:"/search/movie",REACT_APP_KEY:"e1624229ca6a1ecb839c2152fe39999a"}),r=a.REACT_APP_BASE_URL,n=a.REACT_APP_KEY,c="".concat(r).concat(t,"&&api_key=").concat(n),e.prev=2,e.next=5,k.a.get(c);case 5:return o=e.sent,i=o.data,e.abrupt("return",i);case 10:return e.prev=10,e.t0=e.catch(2),console.info(e.t0),e.abrupt("return",new Error({success:!1,message:e.t0}));case 14:case"end":return e.stop()}},e,null,[[2,10]])}))).apply(this,arguments)}function T(e){var t=e.reducer,a=e.state,r=e.action,n=e.onSuccess,c=e.isObservable,o=void 0===c||c,i=r.stage,l=r.error;if(t===r.reducer&&o)switch(i){case S:a=a.merge({loading:!0,error:null});break;case w:a=a.merge({loading:!1,error:l});break;case O:a=a.merge({loading:!1,loaded:!0,error:null})}switch(i){case O:return n(a);default:return a}}var x,R=function(e){var t=e.dispatch,a=e.reducer,r=e.type,n=e.promise,c=e.payload;return t({reducer:a,type:r+S,stage:S}),n.then(function(e){return e&&!1===e.success?t({reducer:a,type:r+w,stage:w,error:(e.errors||[]).join("\r\n")}):t({reducer:a,type:r+O,stage:O,response:e,payload:c})}).catch(function(e){console.error(e),t({reducer:a,type:r+w,stage:w,error:e.toString()})})},V=new(Object(b.a)(Object(g.a)({},j,{moviesList:null,totalPages:null,currentPage:null,search:null}))),D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.response,n=t.payload;switch(a){case"SET_SEARCH_TEXT":return e.set("search",n);default:return T({reducer:"MOVIES",state:e,action:t,onSuccess:function(e){switch(a){case"POPULAR_MOVIES"+O:case"SEARCH_MOVIES"+O:return e.set("moviesList",r.results).set("totalPages",r.total_pages).set("currentPage",r.page).set("search",null);default:return e}}})}},L=new(Object(b.a)(Object(g.a)({},j,{currentMovie:null}))),U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.response;return T({reducer:"MOVIE",state:e,action:t,onSuccess:function(e){switch(a){case"GET_MOVIE"+O:return e.set("currentMovie",r);default:return e}}})},H=Object(E.a)(),B=[h.a.withExtraArgument({api:function(e){return C("".concat("/discover/movie?sort_by=popularity.desc","&&").concat(e))},searchApi:function(e){return C("".concat("/search/movie").concat(e))},articleApi:function(e){return C("/movie/".concat(e,"?"))}}),Object(f.a)(H)],G=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||v.d,W=Object(v.e)((x=H,Object(v.c)({movie:U,movies:D,router:Object(d.b)(x)})),G(v.a.apply(void 0,B))),X=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={error:null,errorInfo:null},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,errorInfo:t})}},{key:"render",value:function(){var e=this.state,t=e.errorInfo,a=e.error,r=this.props.children;return t?n.a.createElement("div",{style:{textAlign:"center"}},n.a.createElement("h2",null,"SOMETHING_WENT_WRONG"),n.a.createElement("details",{style:{whiteSpace:"pre-wrap"}},a&&a.toString(),n.a.createElement("br",null),t.componentStack)):r}}]),t}(r.Component),q=a(36),z=a(60),F=(a(233),function(){return n.a.createElement("header",{className:"header"},n.a.createElement("h1",null,n.a.createElement(z.a,{to:"/"},"The Movie App")))}),J=(a(237),function(e){var t=e.children;return n.a.createElement("div",{className:"dark-layer"},n.a.createElement(F,null),n.a.createElement("main",{className:"container"},t))}),K=function(e){return function(t,a,r){var n=r.searchApi;return R({dispatch:t,reducer:"MOVIES",type:"SEARCH_MOVIES",promise:n(e),payload:{}})}},Y=a(48),Q=a.n(Y),Z=a(186),$=a.n(Z),ee=(a(249),function(e){var t=e.setSearchText,a=e.search,r=$()(t,500);return n.a.createElement("div",{className:"filters-container"},n.a.createElement("input",{id:"search",autoComplete:"off",type:"text",placeholder:"search keyword...",onChange:function(e){var t=e.target.value;return r(t)}}),n.a.createElement("button",{id:"search-button",value:"Search \ud83d\udd0e",className:a?"search-button-visible":"",onClick:function(t){t.preventDefault();var r=Q.a.stringify({query:a});e.history.push("/?".concat(r))}},"Search"))}),te=Object(p.c)(function(e){return{search:e.movies.search}},{setSearchText:function(e){return{type:"SET_SEARCH_TEXT",payload:e}},getSearchMovies:K})(Object(q.g)(ee)),ae=(a(250),function(e){var t,a=e.movie,r=a.vote_average,c=a.poster_path,o=a.title,i=a.overview,l=a.id,s=r?Number(r).toFixed(1):"\ud83d\ude15";return n.a.createElement("div",{className:"card"},n.a.createElement("div",{className:"card_image"},n.a.createElement("img",{src:(t=c,"https://image.tmdb.org/t/p/w500/".concat(t)),alt:"poster"}),n.a.createElement("div",{className:"card_rate"},n.a.createElement("span",null,"\u2605"),s)),n.a.createElement("div",{className:"card_body"},n.a.createElement("h3",null,o),n.a.createElement("p",{className:"card_overview"},i),n.a.createElement(z.a,{to:"/article/".concat(l),className:"card_view-more"},"VIEW MORE")))}),re=(a(251),function(e){var t=e.totalPages,a=e.currentPage,r=e.history,c=function(t){var a=t.target.id,n=Q.a.parse(e.location.search),c=Q.a.stringify(Object(g.a)({},n,{page:a}));r.push("/?".concat(c))};return function(){if(!a||t<2)return"";for(var e=t>=999?999:t,r=e>=a+1?a+1:a,o=a-1>0?a-1:1,i=[];o<=r;o++)i.push(n.a.createElement("span",{onClick:c,className:"pagination__item"+(a===o?" pagination__item_active":""),id:o,key:o},o));return e>a+2&&i.push(n.a.createElement("span",{onClick:c,className:"pagination__item dots"+(a===t?" pagination__item_active":""),id:e,key:e},"... ",e)),n.a.createElement("div",{className:"pagination"},i)}()}),ne=Object(p.c)(function(e){var t=e.movies,a=t.currentPage;return{totalPages:t.totalPages,currentPage:a,loaded:t.loaded}},null)(Object(q.g)(re)),ce=(a(252),function(){return n.a.createElement("div",{className:"footer"},n.a.createElement("div",{className:"api-footer"},n.a.createElement("a",{href:"https://www.themoviedb.org/documentation/api",target:"_blank",rel:"noopener noreferrer"},"App was developed using the The Movie db API"," ",n.a.createElement("span",{role:"img","aria-label":"heart"},"\u2764\ufe0f"))),n.a.createElement(ne,null))}),oe=a(187),ie=(a(281),function(){return n.a.createElement("div",{className:"sweet-loading"},n.a.createElement(oe.SyncLoader,{css:{display:"block",margin:"0 auto",borderColor:"red"},sizeUnit:"px",size:20,color:"#61efff"}))}),le={fontSize:"30px",fontWeight:"700",color:"#8ccff1bd",textShadow:"#8ccff1bd 0px 0px 6px"},se=function(e){return n.a.createElement("div",{style:Object(g.a)({},le)},"Nothing found by request"," ",n.a.createElement("span",{role:"img","aria-label":"sad smiley"},"\ud83d\ude30"))},ue=(a(282),function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).fetchData=function(){var e=a.props,t=e.getPopularMovies,r=e.getSearchMovies,n=a.props.location.search;if(n){var c=Q.a.parse(n);return c&&c.query?r(n):t(Q.a.extract(n))}t("page=1")},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(e,t){e.location.search!==this.props.location.search&&this.fetchData()}},{key:"render",value:function(){var e=this.props,t=e.movies;return e.loading?n.a.createElement(ie,null):n.a.createElement("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"space-between"}},n.a.createElement(te,null),n.a.createElement("section",{className:"card-list"},t&&t.length?t.map(function(e){return n.a.createElement(ae,{key:e.id,movie:e})}):n.a.createElement(se,null)),n.a.createElement(ce,null))}}]),t}(r.Component)),me={getPopularMovies:function(e){return function(t,a,r){var n=r.api;return R({dispatch:t,reducer:"MOVIES",type:"POPULAR_MOVIES",promise:n(e),payload:{}})}},getSearchMovies:K},pe=Object(p.c)(function(e){var t=e.movies,a=t.moviesList,r=t.currentPage;return{movies:a,totalPages:t.totalPages,currentPage:r,loading:t.loading}},me)(ue),de=(a(283),function(e){var t=e.getMovie,a=e.match,c=e.currentMovie,o=e.loading,i=a.params.id;Object(r.useEffect)(function(){t(i)},[t,i]);if(o)return n.a.createElement(ie,null);var l,s=c.genres.map(function(e){return e.name}).join(" / "),u=c.vote_average?+c.vote_average.toFixed(1):"--";return n.a.createElement("div",{className:"article"},n.a.createElement("button",{className:"back",onClick:function(){return e.history.goBack()}},"\u2190"),n.a.createElement("h1",null,c.title),n.a.createElement("div",{className:"content",style:{display:"flex",flexDirection:"column"}},n.a.createElement("img",{src:(l=c.backdrop_path||c.poster_path,"https://image.tmdb.org/t/p/w500/".concat(l)),alt:c.title,style:{width:"100%"}}),n.a.createElement("div",{className:"description"},c.overview),n.a.createElement("div",{className:"details"},n.a.createElement("div",{className:"row"},n.a.createElement("span",null,"Language:"),n.a.createElement("p",null,c.original_language)),n.a.createElement("div",{className:"row"},n.a.createElement("span",null,"Status:"),n.a.createElement("p",null,c.status)),n.a.createElement("div",{className:"row"},n.a.createElement("span",null,"Date:"),n.a.createElement("p",null,c.release_date)),n.a.createElement("div",{className:"row"},n.a.createElement("span",null,"Genres:"),n.a.createElement("p",null,s)),n.a.createElement("div",{className:"row"},n.a.createElement("span",null,"IMDb:"),n.a.createElement("p",null,u)))))}),ve=Object(p.c)(function(e){var t=e.movie,a=t.currentMovie,r=t.loading,n=t.loaded;return{currentMovie:a,loading:r||!n}},{getMovie:function(e){return function(t,a,r){var n=r.articleApi;return R({dispatch:t,reducer:"MOVIE",type:"GET_MOVIE",promise:n(e),payload:{}})}}})(de);var Ee=function(){return n.a.createElement(J,null,n.a.createElement(q.d,null,n.a.createElement(q.b,{exact:!0,path:"/",component:pe}),n.a.createElement(q.b,{exact:!0,path:"/article/:id",component:ve}),n.a.createElement(q.a,{to:"/"})))},fe=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement(p.a,{store:W},n.a.createElement(d.a,{history:H},n.a.createElement(X,null,n.a.createElement(Ee,null))))}}]),t}(r.Component);a(284);o.a.render(n.a.createElement(fe,null),document.getElementById("root"))}},[[189,1,2]]]);
//# sourceMappingURL=main.cf27fee3.chunk.js.map