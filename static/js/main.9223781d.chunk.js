(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{189:function(e,t,a){e.exports=a(485)},194:function(e,t,a){},233:function(e,t,a){},245:function(e,t,a){},246:function(e,t,a){},250:function(e,t,a){},251:function(e,t,a){},280:function(e,t,a){},281:function(e,t,a){},282:function(e,t,a){},485:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(96),o=a.n(c),i=(a(194),a(66)),l=a(67),s=a(69),u=a(68),p=a(70),d=a(23),m=a(78),f=a(47),v=a(188),h=a(142),E=a(182),g=a(46),b=a(99),y=a(80),_=a.n(y),O="_SUCCESS",S="_START",w="_FAIL",j={loading:!1,loaded:!1,error:null},P=(_.a.bool,_.a.bool,_.a.string,a(134)),A=a.n(P),M=a(183),k=a(184),C=a.n(k);function N(e){return I.apply(this,arguments)}function I(){return(I=Object(M.a)(A.a.mark(function e(t){var a,r,n,c,o,i;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object({NODE_ENV:"production",PUBLIC_URL:"/house96/the-Movies-api",REACT_APP_BASE_URL:"https://api.themoviedb.org/3",REACT_APP_POPULAR_MOVIES:"/discover/movie?sort_by=popularity.desc",REACT_APP_SEARCH_MOVIE:"/search/movie",REACT_APP_KEY:"e1624229ca6a1ecb839c2152fe39999a"}),r=a.REACT_APP_BASE_URL,n=a.REACT_APP_KEY,c="".concat(r).concat(t,"&&api_key=").concat(n),e.prev=2,e.next=5,C.a.get(c);case 5:return o=e.sent,i=o.data,e.abrupt("return",i);case 10:return e.prev=10,e.t0=e.catch(2),console.info(e.t0),e.abrupt("return",new Error({success:!1,message:e.t0}));case 14:case"end":return e.stop()}},e,null,[[2,10]])}))).apply(this,arguments)}function T(e){var t=e.reducer,a=e.state,r=e.action,n=e.onSuccess,c=e.isObservable,o=void 0===c||c,i=r.stage,l=r.error;if(t===r.reducer&&o)switch(i){case S:a=a.merge({loading:!0,error:null});break;case w:a=a.merge({loading:!1,error:l});break;case O:a=a.merge({loading:!1,loaded:!0,error:null})}switch(i){case O:return n(a);default:return a}}var x,R=function(e){var t=e.dispatch,a=e.reducer,r=e.type,n=e.promise,c=e.payload;return t({reducer:a,type:r+S,stage:S}),n.then(function(e){return e&&!1===e.success?t({reducer:a,type:r+w,stage:w,error:(e.errors||[]).join("\r\n")}):t({reducer:a,type:r+O,stage:O,response:e,payload:c})}).catch(function(e){console.error(e),t({reducer:a,type:r+w,stage:w,error:e.toString()})})},V=new(Object(b.a)(Object(g.a)({},j,{moviesList:null,totalPages:null,currentPage:null,search:null}))),L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.response,n=t.payload;switch(a){case"SET_SEARCH_TEXT":return e.set("search",n);default:return T({reducer:"MOVIES",state:e,action:t,onSuccess:function(e){switch(a){case"POPULAR_MOVIES"+O:case"SEARCH_MOVIES"+O:return e.set("moviesList",r.results).set("totalPages",r.total_pages).set("currentPage",r.page);default:return e}}})}},D=new(Object(b.a)(Object(g.a)({},j,{currentMovie:null}))),U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.response;return T({reducer:"MOVIE",state:e,action:t,onSuccess:function(e){switch(a){case"GET_MOVIE"+O:return e.set("currentMovie",r);default:return e}}})},H=Object(v.a)(),B=[E.a.withExtraArgument({api:function(e){return N("".concat("/discover/movie?sort_by=popularity.desc","&&").concat(e))},searchApi:function(e){return N("".concat("/search/movie").concat(e))},articleApi:function(e){return N("/movie/".concat(e,"?"))}}),Object(h.a)(H)],G=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||f.d,W=Object(f.e)((x=H,Object(f.c)({movie:U,movies:L,router:Object(m.b)(x)})),G(f.a.apply(void 0,B))),X=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={error:null,errorInfo:null},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,errorInfo:t})}},{key:"render",value:function(){var e=this.state,t=e.errorInfo,a=e.error,r=this.props.children;return t?n.a.createElement("div",{style:{textAlign:"center"}},n.a.createElement("h2",null,"SOMETHING_WENT_WRONG"),n.a.createElement("details",{style:{whiteSpace:"pre-wrap"}},a&&a.toString(),n.a.createElement("br",null),t.componentStack)):r}}]),t}(r.Component),q=a(36),z=(a(233),function(e){var t=e.children;return n.a.createElement("div",{className:"dark-layer"},t)}),J=function(e){return function(t,a,r){var n=r.searchApi;return R({dispatch:t,reducer:"MOVIES",type:"SEARCH_MOVIES",promise:n(e),payload:{}})}},K=a(48),Y=a.n(K),F=a(186),Q=a.n(F),Z=(a(245),function(e){var t=e.setSearchText,a=e.search,r=Q()(t,500);return n.a.createElement("header",null,n.a.createElement("div",{className:"filters-container"},n.a.createElement("input",{id:"search",autoComplete:"off",type:"text",placeholder:"Search keyword...",onChange:function(e){var t=e.target.value;return r(t)}}),n.a.createElement("button",{id:"search-button",defaultValue:"Search",className:a?"search-button-visible":"",onClick:function(t){t.preventDefault();var r=Y.a.stringify({query:a});e.history.push("/?".concat(r))}},"Search")))}),$=Object(d.c)(function(e){return{search:e.movies.search}},{setSearchText:function(e){return{type:"SET_SEARCH_TEXT",payload:e}},getSearchMovies:J})(Object(q.g)(Z)),ee=a(77),te=(a(246),function(e){var t,a=e.movie;return n.a.createElement("div",{className:"card"},n.a.createElement("div",{className:"card_image"},n.a.createElement("img",{src:(t=a.poster_path,"https://image.tmdb.org/t/p/w500/".concat(t)),alt:"poster"})),n.a.createElement("div",{className:"card_body"},n.a.createElement("h1",null,a.title),n.a.createElement("p",{className:"card_overview"},a.overview),n.a.createElement(ee.a,{to:"/article/".concat(a.id),className:"card_view-more"},"VIEW MORE")))}),ae=(a(250),function(e){var t=e.totalPages,a=e.currentPage,r=e.history,c=function(t){var a=t.target.id,n=Y.a.parse(e.location.search),c=Y.a.stringify(Object(g.a)({},n,{page:a}));r.push("/?".concat(c))};return function(){if(!a||t<2)return"";for(var e=t>=999?999:t,r=e>=a+1?a+1:a,o=a-1>0?a-1:1,i=[];o<=r;o++)i.push(n.a.createElement("span",{onClick:c,className:"pagination__item"+(a===o?" pagination__item_active":""),id:o,key:o},o));return e>a+2&&i.push(n.a.createElement("span",{onClick:c,className:"pagination__item dots"+(a===t?" pagination__item_active":""),id:e,key:e},"... ",e)),n.a.createElement("div",{className:"pagination"},i)}()}),re=Object(d.c)(function(e){var t=e.movies,a=t.currentPage;return{totalPages:t.totalPages,currentPage:a,loaded:t.loaded}},null)(Object(q.g)(ae)),ne=(a(251),function(){return n.a.createElement("div",{className:"footer"},n.a.createElement("div",{className:"api-footer"},n.a.createElement("a",{href:"https://www.themoviedb.org/documentation/api",target:"_blank",rel:"noopener noreferrer"},"App was developed using the The Movie db API"," ",n.a.createElement("span",{role:"img","aria-label":"heart"},"\u2764\ufe0f"))),n.a.createElement(re,null))}),ce=a(187),oe=(a(280),function(){return n.a.createElement("div",{className:"sweet-loading"},n.a.createElement(ce.SyncLoader,{css:{display:"block",margin:"0 auto",borderColor:"red"},sizeUnit:"px",size:20,color:"#61efff"}))}),ie={fontSize:"30px",fontWeight:"700",color:"#8ccff1bd",textShadow:"#8ccff1bd 0px 0px 6px"},le=function(e){return n.a.createElement("div",{style:Object(g.a)({},ie)},"Nothing found by request"," ",n.a.createElement("span",{role:"img","aria-label":"sad smiley"},"\ud83d\ude30"))},se=(a(281),function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).fetchData=function(){var e=a.props,t=e.getPopularMovies,r=e.getSearchMovies,n=a.props.location.search;if(n){var c=Y.a.parse(n);return c&&c.query?r(n):t(Y.a.extract(n))}t("page=1")},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(e,t){e.location.search!==this.props.location.search&&this.fetchData()}},{key:"render",value:function(){var e=this.props,t=e.movies;return e.loading?n.a.createElement(oe,null):n.a.createElement("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"space-between"}},n.a.createElement($,null),n.a.createElement("section",{className:"card-list"},t&&t.length?t.map(function(e){return n.a.createElement(te,{key:e.id,movie:e})}):n.a.createElement(le,null)),n.a.createElement(ne,null))}}]),t}(r.Component)),ue={getPopularMovies:function(e){return function(t,a,r){var n=r.api;return R({dispatch:t,reducer:"MOVIES",type:"POPULAR_MOVIES",promise:n(e),payload:{}})}},getSearchMovies:J},pe=Object(d.c)(function(e){var t=e.movies,a=t.moviesList,r=t.currentPage;return{movies:a,totalPages:t.totalPages,currentPage:r,loading:t.loading}},ue)(se),de=(a(282),function(e){var t=e.getMovie,a=e.match,c=e.currentMovie,o=e.loading,i=a.params.id;Object(r.useEffect)(function(){t(i)},[t,i]);var l;return o?n.a.createElement(oe,null):n.a.createElement("div",{className:"article"},n.a.createElement("button",{className:"back",onClick:function(){return e.history.goBack()}},"\u2190"),n.a.createElement("h1",null,c.title),n.a.createElement("div",{className:"content",style:{display:"flex",flexDirection:"column"}},n.a.createElement("img",{src:(l=c.backdrop_path||c.poster_path,"https://image.tmdb.org/t/p/w500/".concat(l)),alt:c.title,style:{width:"100%"}}),n.a.createElement("div",{className:"description"},c.overview)))}),me=Object(d.c)(function(e){var t=e.movie,a=t.currentMovie,r=t.loading,n=t.loaded;return{currentMovie:a,loading:r||!n}},{getMovie:function(e){return function(t,a,r){var n=r.articleApi;return R({dispatch:t,reducer:"MOVIE",type:"GET_MOVIE",promise:n(e),payload:{}})}}})(de);var fe=function(){return n.a.createElement(z,null,n.a.createElement(q.d,null,n.a.createElement(q.b,{exact:!0,path:"/",component:pe}),n.a.createElement(q.b,{exact:!0,path:"/article/:id",component:me}),n.a.createElement(q.a,{to:"/"})))},ve=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement(d.a,{store:W},n.a.createElement(m.a,{history:H},n.a.createElement(X,null,n.a.createElement(fe,null))))}}]),t}(r.Component);a(283);o.a.render(n.a.createElement(ve,null),document.getElementById("root"))}},[[189,1,2]]]);
//# sourceMappingURL=main.9223781d.chunk.js.map